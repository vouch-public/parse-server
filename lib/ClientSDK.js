"use strict";

var semver = require('semver');
function compatible(compatibleSDK) {
  return function (clientSDK) {
    if (typeof clientSDK === 'string') {
      clientSDK = fromString(clientSDK);
    }
    // REST API, or custom SDK
    if (!clientSDK) {
      return true;
    }
    const clientVersion = clientSDK.version;
    const compatiblityVersion = compatibleSDK[clientSDK.sdk];
    return semver.satisfies(clientVersion, compatiblityVersion);
  };
}
function supportsForwardDelete(clientSDK) {
  return compatible({
    js: '>=1.9.0'
  })(clientSDK);
}
function fromString(version) {
  const versionRE = /([-a-zA-Z]+)([0-9\.]+)/;
  const match = version.toLowerCase().match(versionRE);
  if (match && match.length === 3) {
    return {
      sdk: match[1],
      version: match[2]
    };
  }
  return undefined;
}
module.exports = {
  compatible,
  supportsForwardDelete,
  fromString
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzZW12ZXIiLCJyZXF1aXJlIiwiY29tcGF0aWJsZSIsImNvbXBhdGlibGVTREsiLCJjbGllbnRTREsiLCJmcm9tU3RyaW5nIiwiY2xpZW50VmVyc2lvbiIsInZlcnNpb24iLCJjb21wYXRpYmxpdHlWZXJzaW9uIiwic2RrIiwic2F0aXNmaWVzIiwic3VwcG9ydHNGb3J3YXJkRGVsZXRlIiwianMiLCJ2ZXJzaW9uUkUiLCJtYXRjaCIsInRvTG93ZXJDYXNlIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIi4uL3NyYy9DbGllbnRTREsuanMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIHNlbXZlciA9IHJlcXVpcmUoJ3NlbXZlcicpO1xuXG5mdW5jdGlvbiBjb21wYXRpYmxlKGNvbXBhdGlibGVTREspIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChjbGllbnRTREspIHtcbiAgICBpZiAodHlwZW9mIGNsaWVudFNESyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGNsaWVudFNESyA9IGZyb21TdHJpbmcoY2xpZW50U0RLKTtcbiAgICB9XG4gICAgLy8gUkVTVCBBUEksIG9yIGN1c3RvbSBTREtcbiAgICBpZiAoIWNsaWVudFNESykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGNvbnN0IGNsaWVudFZlcnNpb24gPSBjbGllbnRTREsudmVyc2lvbjtcbiAgICBjb25zdCBjb21wYXRpYmxpdHlWZXJzaW9uID0gY29tcGF0aWJsZVNES1tjbGllbnRTREsuc2RrXTtcbiAgICByZXR1cm4gc2VtdmVyLnNhdGlzZmllcyhjbGllbnRWZXJzaW9uLCBjb21wYXRpYmxpdHlWZXJzaW9uKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gc3VwcG9ydHNGb3J3YXJkRGVsZXRlKGNsaWVudFNESykge1xuICByZXR1cm4gY29tcGF0aWJsZSh7XG4gICAganM6ICc+PTEuOS4wJyxcbiAgfSkoY2xpZW50U0RLKTtcbn1cblxuZnVuY3Rpb24gZnJvbVN0cmluZyh2ZXJzaW9uKSB7XG4gIGNvbnN0IHZlcnNpb25SRSA9IC8oWy1hLXpBLVpdKykoWzAtOVxcLl0rKS87XG4gIGNvbnN0IG1hdGNoID0gdmVyc2lvbi50b0xvd2VyQ2FzZSgpLm1hdGNoKHZlcnNpb25SRSk7XG4gIGlmIChtYXRjaCAmJiBtYXRjaC5sZW5ndGggPT09IDMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc2RrOiBtYXRjaFsxXSxcbiAgICAgIHZlcnNpb246IG1hdGNoWzJdLFxuICAgIH07XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNvbXBhdGlibGUsXG4gIHN1cHBvcnRzRm9yd2FyZERlbGV0ZSxcbiAgZnJvbVN0cmluZyxcbn07XG4iXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSUEsTUFBTSxHQUFHQyxPQUFPLENBQUMsUUFBUSxDQUFDO0FBRTlCLFNBQVNDLFVBQVUsQ0FBQ0MsYUFBYSxFQUFFO0VBQ2pDLE9BQU8sVUFBVUMsU0FBUyxFQUFFO0lBQzFCLElBQUksT0FBT0EsU0FBUyxLQUFLLFFBQVEsRUFBRTtNQUNqQ0EsU0FBUyxHQUFHQyxVQUFVLENBQUNELFNBQVMsQ0FBQztJQUNuQztJQUNBO0lBQ0EsSUFBSSxDQUFDQSxTQUFTLEVBQUU7TUFDZCxPQUFPLElBQUk7SUFDYjtJQUNBLE1BQU1FLGFBQWEsR0FBR0YsU0FBUyxDQUFDRyxPQUFPO0lBQ3ZDLE1BQU1DLG1CQUFtQixHQUFHTCxhQUFhLENBQUNDLFNBQVMsQ0FBQ0ssR0FBRyxDQUFDO0lBQ3hELE9BQU9ULE1BQU0sQ0FBQ1UsU0FBUyxDQUFDSixhQUFhLEVBQUVFLG1CQUFtQixDQUFDO0VBQzdELENBQUM7QUFDSDtBQUVBLFNBQVNHLHFCQUFxQixDQUFDUCxTQUFTLEVBQUU7RUFDeEMsT0FBT0YsVUFBVSxDQUFDO0lBQ2hCVSxFQUFFLEVBQUU7RUFDTixDQUFDLENBQUMsQ0FBQ1IsU0FBUyxDQUFDO0FBQ2Y7QUFFQSxTQUFTQyxVQUFVLENBQUNFLE9BQU8sRUFBRTtFQUMzQixNQUFNTSxTQUFTLEdBQUcsd0JBQXdCO0VBQzFDLE1BQU1DLEtBQUssR0FBR1AsT0FBTyxDQUFDUSxXQUFXLEVBQUUsQ0FBQ0QsS0FBSyxDQUFDRCxTQUFTLENBQUM7RUFDcEQsSUFBSUMsS0FBSyxJQUFJQSxLQUFLLENBQUNFLE1BQU0sS0FBSyxDQUFDLEVBQUU7SUFDL0IsT0FBTztNQUNMUCxHQUFHLEVBQUVLLEtBQUssQ0FBQyxDQUFDLENBQUM7TUFDYlAsT0FBTyxFQUFFTyxLQUFLLENBQUMsQ0FBQztJQUNsQixDQUFDO0VBQ0g7RUFDQSxPQUFPRyxTQUFTO0FBQ2xCO0FBRUFDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHO0VBQ2ZqQixVQUFVO0VBQ1ZTLHFCQUFxQjtFQUNyQk47QUFDRixDQUFDIn0=